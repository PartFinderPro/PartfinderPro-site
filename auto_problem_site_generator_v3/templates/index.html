
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{site_name} — Instant DIY Car Fix Guides</title>
  <meta name="description" content="{site_description}">
  <meta property="og:title" content="{site_name} — Instant DIY Car Fix Guides">
  <meta property="og:description" content="{site_description}">
  {head_common}
</head>
<body>
  <div class="headerbar">
    <header class="container">
      <a href="./index.html" class="brand">{site_name}</a>
    </header>
  </div>

  <main class="container card">
    <h1>Find Your Fix Fast</h1>
    <p>Type your symptom and we’ll show likely causes, parts and DIY steps. Browse by make or by problem below.</p>

    <input id="q" placeholder="e.g., 2016 Ford F-150 won't start" style="width:100%;padding:12px;border-radius:10px;border:1px solid #e5e7eb;margin:12px 0;">
    <div id="results"></div>

    <h2>Browse by Make</h2>
    <div id="makes"></div>

    <h2>Browse by Problem</h2>
    <div id="problems"></div>
  </main>

  <footer class="container foot">
    <p>© {site_name}. This site uses affiliate links. <a href="./sitemap.xml">Sitemap</a> • <a href="./feed.xml">RSS</a></p>
  </footer>

  <script>
  async function load() {{
    const res = await fetch('./sitemap.json');
    const data = await res.json();
    const q = document.getElementById('q');
    const results = document.getElementById('results');
    const makesDiv = document.getElementById('makes');
    const probsDiv = document.getElementById('problems');

    function render(items) {{
      results.innerHTML = items.slice(0,50).map(item => `
        <div class="card">
          <a href="${{item.url}}"><h3>${{item.title}}</h3></a>
          <div style="color:#6b7280">${{item.meta}}</div>
        </div>`).join('');
    }}

    render(data);

    q.addEventListener('input', () => {{
      const s = q.value.toLowerCase();
      const filtered = data.filter(x => (x.title + ' ' + x.meta).toLowerCase().includes(s));
      render(filtered);
    }});

    // Build lists
    const byMake = {{}}, byProblem = {{}};
    data.forEach(d => {{
      const key = d.make;
      byMake[key] = byMake[key] || [];
      byMake[key].push(d);

      const pk = d.problem;
      byProblem[pk] = byProblem[pk] || [];
      byProblem[pk].push(d);
    }});

    makesDiv.innerHTML = Object.keys(byMake).sort().map(m => `<a class="badge" href="./makes/${{m.toLowerCase().replace(/[^a-z0-9]+/g,'-')}}.html">${{m}}</a>`).join(' ');
    probsDiv.innerHTML = Object.keys(byProblem).sort().map(p => `<a class="badge" href="./problems/${{p.toLowerCase().replace(/[^a-z0-9]+/g,'-')}}.html">${{p}}</a>`).join(' ');
  }}
  load();
  </script>
</body>
</html>
